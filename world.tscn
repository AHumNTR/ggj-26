[gd_scene format=3 uid="uid://wu6tt5cs0byc"]

[ext_resource type="PackedScene" uid="uid://bmqfdbicayqrx" path="res://player.tscn" id="1_f3sb7"]
[ext_resource type="Script" uid="uid://caxlnol7dvrkd" path="res://globalui.gd" id="4_036b0"]
[ext_resource type="PackedScene" uid="uid://dghfmmaacw68i" path="res://enemy_spawner.tscn" id="4_aqk2v"]
[ext_resource type="Material" uid="uid://2gws1vuos5pt" path="res://materials/wall.tres" id="4_dwbse"]
[ext_resource type="Texture2D" uid="uid://d2sl1j5mex4x3" path="res://Textures/YellowGhostAnim.png" id="5_036b0"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_tlwt5"]
sky_top_color = Color(1, 0.31377584, 0.2803165, 1)
sky_horizon_color = Color(1, 0.3137255, 0.2784314, 1)
ground_bottom_color = Color(1, 0.3137255, 0.2784314, 1)
ground_horizon_color = Color(1, 0.3137255, 0.2784314, 1)

[sub_resource type="Sky" id="Sky_aqk2v"]
sky_material = SubResource("ProceduralSkyMaterial_tlwt5")

[sub_resource type="Environment" id="Environment_tlwt5"]
background_mode = 2
background_color = Color(0.8659264, 0, 0.1953721, 1)
sky = SubResource("Sky_aqk2v")
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 3.0
tonemap_mode = 2
glow_enabled = true
glow_bloom = 0.18
fog_enabled = true
fog_light_color = Color(0, 0, 0, 1)
fog_density = 0.0255
fog_sky_affect = 0.0
volumetric_fog_density = 0.01
volumetric_fog_albedo = Color(1, 0.42352942, 0.39607844, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_036b0"]
vertices = PackedVector3Array(-99.25, 0.6044903, 17, -42.5, 0.6044903, 17.25, -42.25, 0.6044903, 15.5, -34.25, 0.6044903, -99.25, -99.25, 0.6044903, -99.25, -34.5, 0.6044903, 15.5, -33, 0.6044903, 15.5, -32.75, 0.6044903, 16, -9, 0.6044903, 15, -9, 0.6044903, 5.25, -7.5, 0.6044903, -99.25, -7.25, 0.6044903, 5, -0.5, 0.6044903, 5, -0.25, 0.6044903, -99.25, 1, 0.6044903, 5, 1.25, 0.6044903, 6.75, 99.5, 0.6044903, 6.5, 99.5, 0.6044903, -99.25, -8, 10.10449, 6, -8, 10.10449, 14.5, 0.25, 10.10449, 14.5, 0.25, 10.10449, 6, -7.75, 0.6044903, 6.25, -7.75, 0.6044903, 14.25, 0, 0.6044903, 14.25, 0, 0.6044903, 6.25, 1.25, 0.6044903, 13.75, 99.5, 0.6044903, 14, 1, 0.6044903, 15.5, -0.5, 0.6044903, 15.5, -0.25, 0.6044903, 99.25, 99.5, 0.6044903, 99.25, -8.75, 0.6044903, 15.5, -7.25, 0.6044903, 15.5, -32.75, 0.6044903, 25.25, -34.25, 0.6044903, 99.25, -7.5, 0.6044903, 99.25, -34.5, 0.6044903, 25.5, -99.25, 0.6044903, 24, -42.5, 0.6044903, 23.75, -42.5, 0.6044903, 25.25, -40.75, 0.6044903, 25.5, -99.25, 0.6044903, 99.25, -41, 0.6044903, 99.25)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 4), PackedInt32Array(2, 4, 3), PackedInt32Array(3, 5, 2), PackedInt32Array(6, 8, 7), PackedInt32Array(6, 5, 8), PackedInt32Array(8, 5, 9), PackedInt32Array(10, 9, 3), PackedInt32Array(3, 9, 5), PackedInt32Array(10, 11, 9), PackedInt32Array(11, 10, 12), PackedInt32Array(12, 10, 13), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(17, 14, 13), PackedInt32Array(14, 12, 13), PackedInt32Array(21, 20, 18), PackedInt32Array(18, 20, 19), PackedInt32Array(25, 24, 22), PackedInt32Array(22, 24, 23), PackedInt32Array(15, 16, 26), PackedInt32Array(26, 16, 27), PackedInt32Array(30, 29, 28), PackedInt32Array(28, 26, 30), PackedInt32Array(30, 26, 27), PackedInt32Array(30, 27, 31), PackedInt32Array(32, 7, 8), PackedInt32Array(32, 33, 7), PackedInt32Array(7, 33, 34), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 33), PackedInt32Array(35, 37, 34), PackedInt32Array(33, 29, 36), PackedInt32Array(36, 29, 30), PackedInt32Array(39, 38, 1), PackedInt32Array(1, 38, 0), PackedInt32Array(38, 39, 40), PackedInt32Array(40, 41, 38), PackedInt32Array(38, 41, 43), PackedInt32Array(38, 43, 42), PackedInt32Array(41, 37, 43), PackedInt32Array(43, 37, 35)]
geometry_collision_mask = 4294967180
geometry_source_geometry_mode = 1
geometry_source_group_name = &"nav_mesh"

[node name="world" type="Node3D" unique_id=1301096687]

[node name="WorldEnvironment" type="WorldEnvironment" parent="." unique_id=1318533542]
environment = SubResource("Environment_tlwt5")

[node name="player" parent="." unique_id=1195508512 instance=ExtResource("1_f3sb7")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2935276, 0)

[node name="enemy_spawner" parent="." unique_id=370430451 node_paths=PackedStringArray("player") instance=ExtResource("4_aqk2v")]
transform = Transform3D(0.35337692, 0.935481, 0, -0.935481, 0.35337692, 0, 0, 0, 1, 0, 1.9243686, 0)
player = NodePath("../player")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=1644414537]
transform = Transform3D(-0.99999964, -0.00074068125, 0.00042767514, -0.000330026, 0.79547334, 0.60598856, -0.0007890485, 0.6059882, -0.7954733, 0, 15.089474, 0)
shadow_enabled = true

[node name="enemies" type="Node3D" parent="." unique_id=1183267295]

[node name="globalui" type="CanvasLayer" parent="." unique_id=1553629028]
script = ExtResource("4_036b0")

[node name="waveprogress" type="ProgressBar" parent="globalui" unique_id=1374995669]
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -128.0
offset_top = 53.0
offset_right = 128.0
offset_bottom = 80.0
grow_horizontal = 2

[node name="Node3D" type="Node3D" parent="." unique_id=1437715869]

[node name="elevation" type="CSGCombiner3D" parent="." unique_id=2082682995]
material_override = ExtResource("4_dwbse")
use_collision = true

[node name="Sprite3D" type="Sprite3D" parent="." unique_id=1134831277]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8.529093, 0)
flip_h = true
pixel_size = 0.1
billboard = 2
texture_filter = 0
texture = ExtResource("5_036b0")
region_enabled = true
region_rect = Rect2(517, 0, 123, 128)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="." unique_id=322368522]
navigation_mesh = SubResource("NavigationMesh_036b0")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="." unique_id=103584417 groups=["nav_mesh"]]
material_override = ExtResource("4_dwbse")
use_collision = true
collision_layer = 4
collision_mask = 0

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D" unique_id=1709383703]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.7717743, 0)
material_override = ExtResource("4_dwbse")
use_collision = true
collision_layer = 4
collision_mask = 0
flip_faces = true
size = Vector3(200, 13.228241, 200)

[node name="CSGBox3D3" type="CSGBox3D" parent="CSGCombiner3D" unique_id=328813569]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -37.58532, 2.7111797, 20.559519)
layers = 4
size = Vector3(8.992676, 9.713379, 9.125977)

[node name="CSGBox3D2" type="CSGBox3D" parent="CSGCombiner3D" unique_id=2062414409]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.996338, 4.9841175, 10.279759)
layers = 4
size = Vector3(8.992676, 9.713379, 9.125977)
